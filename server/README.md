## 💻 프로젝트 주제

- 대용량 트래픽, 데이터를 고려한 커머스 플랫폼 설계 + 주문, 포인트 적립/사용, 부분 환불 처리 로직 고도화
    
    ![스크린샷 2022-09-23 오후 4.46.53.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04165968-b7fc-46e7-8477-6ff5c3ec71f3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.46.53.png)
    
    ![스크린샷 2022-09-23 오후 4.58.46.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6ecf6d42-7365-4579-a678-d26e2db0fddc/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.58.46.png)
    

## 🛠 기술 스택

![스크린샷 2022-09-23 오후 4.47.40.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/17580f19-015f-42b4-8d13-b5124194b477/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.47.40.png)

## 💡 주요 내용

### 적립금 부분 환불 기능 고도화 → 이슈 개선 방안 제시

- 아임웹 프로덕션 내 고객이 부분 환불 요청 시 적립금을 부분 반환 처리에 이슈 발견
- 데이터베이스 설계에 문제를 발견하고 해당 부분을 다대다 매핑 테이블 활용하여 재설계 및 트랜젝션 처리
    
    ![스크린샷 2022-09-23 오후 4.47.56.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d6d97084-7d93-4387-af0d-87635c1615e4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.47.56.png)
    
    ![스크린샷 2022-09-23 오후 5.00.31.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c7943071-4d70-4a62-b4b5-0d2b3fdb53ba/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.00.31.png)
    

### 데이터베이스 커넥션 제어 → 리소스 활용 효율 향상

- ORM 사용 시 발생하는 단점(쿼리 제어, 성능 저하 등)mysql 드라이버를 활용
- 커넥션 풀 사용, 커넥션 개수를 제한하여 리소스 고갈 방지
    
    ![스크린샷 2022-09-23 오후 4.48.30.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/10ef4f01-6a47-4385-bb39-207bc86c4dab/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.48.30.png)
    
    ![스크린샷 2022-09-23 오후 5.00.59.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8f073472-ebd4-4ae5-9b28-6ae2a9873d48/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.00.59.png)
    

### 데이터베이스 이중화(읽기&쓰기 전용 분리) → DB 접근 부하 분산

- Master & Slave 구조를 사용, 쓰기 전용 DB(Master)와 읽기 전용 DB(Slave)를 별도로 두고, 용도에 맞게 사용함으로써 DB 접근 부하를 분산
    
    ![스크린샷 2022-09-23 오후 4.48.49.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4e447cf8-e60c-4f89-bfbf-c7eb01629bfd/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.48.49.png)
    

### 레디스 Bull Queue → DB 접근 병목 방지

- Redis 위에 npm Bull로 메세지 큐를 구현하고, 주문 로직을 비동기 프로세스 처리
- DB에 동시 트래픽이 몰리지 않도록 대기열로 DB접근 쿼리를 제어
    
    ![스크린샷 2022-09-23 오후 4.49.23.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ff87f131-fd5b-4187-8679-bd89c478b632/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.49.23.png)
    
    ![스크린샷 2022-09-23 오후 4.49.06.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a2aebab6-51b2-4b86-8e07-a94304898a8b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.49.06.png)
    

### 테스트 코드 작성

- jest를 이용하여 서비스, 컨트롤러 메서드 유닛 테스트 진행
- mock 함수 및 mock data 활용을 통해 테스트 로직의 의존성 분리
    
    ![스크린샷 2022-09-23 오후 4.50.28.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/732d2789-5f2f-4371-a63a-af7e5663ae82/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.50.28.png)
    
    ![스크린샷 2022-09-23 오후 4.50.41.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/afd63b12-9d9e-4296-a275-9f81586f6feb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-09-23_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.50.41.png)
